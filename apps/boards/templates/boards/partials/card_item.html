<div class="card card-item mb-2" id="card-{{ card.id }}">
    <div class="card-body p-3">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <h6 class="card-title mb-0">{{ card.title }}</h6>
            <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" 
                        type="button" 
                        data-bs-toggle="dropdown" 
                        aria-expanded="false">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <button class="dropdown-item" @click="editCard({{ card.id }}, '{{ card.title }}', '{{ card.description }}', {{ card.priority }})">
                            <i class="fas fa-edit me-2"></i>Edit
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item" 
                                hx-delete="{% url 'boards:card_delete' board_id=board_id list_id=list_id card_id=card.id %}"
                                hx-target="#card-{{ card.id }}"
                                hx-swap="outerHTML"
                                hx-confirm="Are you sure you want to delete this card?">
                            <i class="fas fa-trash me-2"></i>Delete
                        </button>
                    </li>
                </ul>
            </div>
        </div>
        
        {% if card.description %}
        <p class="card-text text-muted small mb-2">
            {{ card.description|truncatewords:15 }}
        </p>
        {% endif %}
        
        <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex gap-1">
                {% if card.priority == 10 %}
                    <span class="badge bg-danger priority-badge">Top</span>
                {% elif card.priority == 20 %}
                    <span class="badge bg-warning priority-badge">Important & Urgent</span>
                {% elif card.priority == 30 %}
                    <span class="badge bg-warning priority-badge">Important</span>
                {% elif card.priority == 40 %}
                    <span class="badge bg-info priority-badge">Urgent</span>
                {% elif card.priority == 50 %}
                    <span class="badge bg-primary priority-badge">High</span>
                {% elif card.priority == 60 %}
                    <span class="badge bg-secondary priority-badge">Medium</span>
                {% elif card.priority == 70 %}
                    <span class="badge bg-light text-dark priority-badge">Low</span>
                {% else %}
                    <span class="badge bg-light text-dark priority-badge">Not Important</span>
                {% endif %}
            </div>
            
            {% if card.assignee %}
            <div class="d-flex align-items-center">
                <i class="fas fa-user text-muted me-1"></i>
                <small class="text-muted">{{ card.assignee.username }}</small>
            </div>
            {% endif %}
        </div>
        
        {% if card.due_date %}
        <div class="mt-2">
            <small class="text-muted">
                <i class="fas fa-calendar me-1"></i>
                Due: {{ card.due_date|date:"M d, Y" }}
            </small>
        </div>
        {% endif %}
    </div>
</div>
