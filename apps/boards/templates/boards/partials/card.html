{% load i18n %}
<div class="card card-item mb-2" id="card-{{ card.id }}">
<div class="card-body p-3">
<div class="d-flex justify-content-between align-items-start mb-2">
<h6 class="card-title mb-0">{{ card.title }}</h6>
<div class="dropdown">
<button aria-expanded="false" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-ellipsis-v"></i>
</button>
<ul class="dropdown-menu">
<li>
<button @click="editCard({{ card.id }}, '{{ card.title }}', '{{ card.description }}', {{ card.priority }})" class="dropdown-item">
<i class="fas fa-edit me-2"></i>{% trans "Edit" %}</button>
</li>
<li>
<button class="dropdown-item" hx-confirm="Are you sure you want to delete this card?" hx-delete="{% url 'delete_card' card.id %}" hx-swap="outerHTML" hx-target="#card-{{ card.id }}">
<i class="fas fa-trash me-2"></i>{% trans "Delete" %}</button>
</li>
</ul>
</div>
</div>
{% if card.description %}
<p class="card-text text-muted small mb-2">
{{ card.description|truncatewords:15 }}
</p>
{% endif %}
{% trans "Priority Badge" %}
<div class="d-flex justify-content-between align-items-center">
<div class="d-flex gap-1">
{% if card.priority == 10 %}
<span class="badge bg-danger priority-badge">{% trans "Top" %}</span>
{% elif card.priority == 20 %}
<span class="badge bg-warning priority-badge">{% trans "Important &amp; Urgent" %}</span>
{% elif card.priority == 30 %}
<span class="badge bg-warning priority-badge">{% trans "Important" %}</span>
{% elif card.priority == 40 %}
<span class="badge bg-info priority-badge">{% trans "Urgent" %}</span>
{% elif card.priority == 50 %}
<span class="badge bg-primary priority-badge">{% trans "High" %}</span>
{% elif card.priority == 60 %}
<span class="badge bg-secondary priority-badge">{% trans "Medium" %}</span>
{% elif card.priority == 70 %}
<span class="badge bg-light text-dark priority-badge">{% trans "Low" %}</span>
{% else %}
<span class="badge bg-light text-dark priority-badge">{% trans "Not Important" %}</span>
{% endif %}
</div>
{% if card.assignee %}
<div class="d-flex align-items-center">
<i class="fas fa-user text-muted me-1"></i>
<small class="text-muted">{{ card.assignee.username }}</small>
</div>
{% endif %}
</div>
</div>
</div>