<<<<<<< HEAD
{% load i18n %}
<div class="list-column" id="list-{{ list.id }}">
<div class="card list-card">
<div class="card-header d-flex justify-content-between align-items-center">
<h6 class="mb-0">{{ list.title }}</h6>
<div class="dropdown">
<button aria-expanded="false" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-ellipsis-v"></i>
</button>
<ul class="dropdown-menu">
<li>
<button @click="addCardToList({{ list.id }})" class="dropdown-item">
<i class="fas fa-plus me-2"></i>{% trans "Add Card" %}</button>
</li>
<li>
<button class="dropdown-item" hx-confirm="Are you sure you want to delete this list?" hx-delete="{% url 'delete_list' list.id %}" hx-swap="outerHTML" hx-target="#list-{{ list.id }}">
<i class="fas fa-trash me-2"></i>{% trans "Delete List" %}</button>
</li>
</ul>
=======
{# --- This is the container for a single list column --- #}
<div class="list-column" id="list-{{ list.id }}">
    <div class="card list-card h-100 border-0 bg-light shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <button class="btn btn-link text-dark text-decoration-none p-0 fw-bold"
                    hx-get="{% url 'boards:update_list' board_id=board.id list_id=list.id %}"
                    hx-target="#generic-modal-content"
                    data-bs-toggle="modal"
                    data-bs-target="#genericModal">
                {{ list.title }}
            </button>
            
            {# --- The dropdown menu with all actions, including DELETE --- #}
            <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary py-0 px-1" type="button" data-bs-toggle="dropdown">
                    ...
                </button>
                <ul class="dropdown-menu">
                    <li><button class="dropdown-item" @click="addCardToList({{ list.id }}, {{ board.id }})">Add Card</button></li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        {# ❗❗❗ The Delete List button is back! #}
                        <button class="dropdown-item text-danger" 
                                hx-delete="{% url 'boards:delete_list' board.id list.id %}"
                                hx-target="#list-{{ list.id }}"
                                hx-swap="outerHTML"
                                hx-confirm="Are you sure you want to delete this list and all its cards?">
                            Delete List
                        </button>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="card-body p-2 cards-sortable-container" 
             id="cards-container-{{ list.id }}"
             data-list-id="{{ list.id }}">
            
            {% for card in list.prefetched_cards %}
                {% include "boards/partials/card_item.html" with card=card list=list board=board %}
            {% empty %}
                <div class="text-center text-muted p-3 small">No cards yet.</div>
            {% endfor %}
        </div>
        
        <div class="card-footer p-2 bg-transparent border-0">
            <button class="btn btn-outline-secondary btn-sm w-100" @click="addCardToList({{ list.id }}, {{ board.id }})">
                + Add Card
            </button>
        </div>
    </div>
>>>>>>> 53c2dc37e323beaf708f89a27f016bebfd89f00d
</div>
</div>
<div id="cards-container-{{ list.id }}">
{% for card in list.cards %}
{% include "boards/partials/card_item.html" with card=card %}
{% empty %}
<div class="text-center py-3">
<p class="text-muted small mb-0">{% trans "No cards yet" %}</p>
<button @click="addCardToList({{ list.id }})" class="btn btn-outline-primary btn-sm mt-2">
<i class="fas fa-plus me-1"></i>{% trans "Add Card" %}</button>
</div>
{% endfor %}
</div>
<div class="card-footer bg-transparent p-2">
<button @click="addCardToList({{ list.id }})" class="btn btn-outline-primary btn-sm w-100">
<i class="fas fa-plus me-1"></i>{% trans "Add Card" %}</button>
</div>
</div>
</div>