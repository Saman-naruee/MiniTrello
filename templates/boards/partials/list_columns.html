{% for list in lists %}
<div class="list-column" id="list-{{ list.id }}">
    <div class="card list-card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">{{ list.title }}</h6>
            <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" 
                        type="button" 
                        data-bs-toggle="dropdown" 
                        aria-expanded="false">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <button class="dropdown-item" @click="addCardToList({{ list.id }})">
                            <i class="fas fa-plus me-2"></i>Add Card
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item" 
                                hx-delete="/api/lists/{{ list.id }}/"
                                hx-target="#list-{{ list.id }}"
                                hx-swap="outerHTML"
                                hx-confirm="Are you sure you want to delete this list?">
                            <i class="fas fa-trash me-2"></i>Delete List
                        </button>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="card-body p-2" id="cards-container-{{ list.id }}">
            <!-- Cards will be loaded here -->
            <div class="text-center py-3">
                <div class="spinner-border spinner-border-sm text-muted" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="card-footer bg-transparent p-2">
            <button class="btn btn-outline-primary btn-sm w-100" 
                    @click="addCardToList({{ list.id }})">
                <i class="fas fa-plus me-1"></i>Add Card
            </button>
        </div>
    </div>
</div>

<!-- Load cards for this list -->
<div hx-get="/boards/partials/cards/{{ list.id }}/" 
     hx-trigger="load" 
     hx-target="#cards-container-{{ list.id }}" 
     hx-swap="innerHTML">
</div>
{% empty %}
<div class="col-12 text-center py-5">
    <i class="fas fa-list fa-3x text-muted mb-3"></i>
    <h4 class="text-muted">No lists yet</h4>
    <p class="text-muted">Create your first list to get started!</p>
    <button class="btn btn-primary" @click="showAddListModal = true">
        <i class="fas fa-plus me-2"></i>Create List
    </button>
</div>
{% endfor %}
