{% extends "base.html" %}
{% load i18n %}
{% block head_title %}{% trans "Password Reset" %}{% endblock %}
{% block content %}
<div class="container d-flex justify-content-center align-items-center min-vh-100">
<div class="row justify-content-center w-100">
<div class="col-md-6 col-lg-5">
<div class="card shadow-sm border-0">
<div class="card-body p-4">
<h2 class="card-title text-center mb-4 fw-bold">{% trans "Password Reset" %}</h2>
{% if user.is_authenticated %}
{% include "account/snippets/already_logged_in.html" %}
{% endif %}
<p class="text-muted text-center mb-4">{% trans "Forgot your password? Enter your email address to receive a recovery link." %}</p>
<form action="{% url 'account_reset_password' %}" class="password_reset" method="POST" x-data="passwordResetForm()">
{% csrf_token %}
{% for field in form %}
<div class="mb-3">
<label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
<input class="form-control {% if field.errors %}is-invalid{% endif %}" id="{{ field.id_for_label }}" name="{{ field.name }}" type="{{ field.field.widget.input_type }}" value="{{ field.value|default:'' }}"/>
{% for error in field.errors %}
<div class="invalid-feedback d-block">{{ error }}</div>
{% endfor %}
</div>
{% endfor %}
<div class="d-grid gap-2">
<button @click.prevent="submit" class="btn btn-primary btn-lg" type="submit">{% trans "Reset My Password" %}</button>
</div>
</form>
<p class="text-center mt-3">
<a href="{% url 'account_login' %}">{% trans "Back to Login Page" %}</a>
</p>
</div>
</div>
</div>
</div>
</div>
<script>
document.addEventListener('alpine:init', () => {
Alpine.data('passwordResetForm', () => ({
form: new FormData(),
errors: {},
resetErrors() {
this.errors = {};
},
submit() {
this.resetErrors();
this.form = new FormData(document.querySelector('form'));
fetch('{% url 'account_reset_password' %}', {
method: 'POST',
body: this.form
})
.then(response => response.json())
.then(data => {
this.errors = data.errors || {};
})
.catch(error => console.error(error));
}
}));
});
</script>
{% endblock %}